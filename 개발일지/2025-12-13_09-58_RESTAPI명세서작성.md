# 개발일지

## 📅 작성 시각
2025년 12월 13일 09:58

## 🎯 해결하고자 한 문제
- [x] 문제 1: “당신이 잠든 사이” 서비스의 REST API 명세서 작성
- [x] 문제 2: 5개 핵심 기능(화제 종목/종목 상세/브리핑 생성/발송/히스토리)에 대해 Method/Endpoint/요청/응답/에러 케이스 정의

## ✅ 해결된 것

### 문제 1: REST API 명세서 작성
- **해결 방법**: `/api/v1` 기준으로 공통 규칙(응답/에러 포맷)과 각 기능별 API를 테이블 + JSON 예시로 정리
- **관련 파일**: `설계/REST_API_명세서_당신이잠든사이.md`

### 문제 2: 운영 관점 설계 요소 포함
- **해결 방법**: 비동기 처리(브리핑 생성/발송), 멱등성(Idempotency-Key), 외부 소스 장애 폴백(캐시) 등 운영 필수 요소를 명세서 말미에 반영
- **관련 파일**: `설계/REST_API_명세서_당신이잠든사이.md`

## ❌ 해결되지 않은 것

### 인증/권한 모델 최종 확정
- **이유**: 현재 단계에서는 사용자 계정/구독 모델(개인/팀/워크스페이스) 정의가 없어 JWT 스코프/테넌시 정책을 확정하기 어려움
- **시도한 접근 방법**: 명세서에 “권장(옵션)” 형태로 Bearer JWT를 제시하고, 히스토리 조회 시 인증 필요 가능성을 표기

## 📝 향후 개발을 위한 컨텍스트

### 현재 상태
- REST API 명세서 초안(v1) 작성 완료
- 브리핑 생성/발송을 비동기로 설계(202 Accepted + 상태 조회)

### 다음 단계
- 데이터 모델 확정(Briefing/Dispatch/TrendingResult) 및 DB 스키마 설계
- 인증/권한 정책(개인 구독 vs 팀 슬랙 워크스페이스) 결정
- 외부 연동(Email ESP/Slack webhook)별 에러 코드 매핑 구체화

### 참고 사항
- Yahoo Finance 기반 데이터는 비공식 성격이므로 **Upstream Error(502) 처리/재시도/캐시**가 필수
- 명세서의 URL 필드(`cdn.example.com`, `hooks.slack.com`)은 예시이며 운영 환경에 맞게 교체 필요


